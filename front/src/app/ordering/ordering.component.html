<div class="orders-container">
	<!-- Заголовок -->
	<div class="orders-header" data-aos="fade-down">
		<h1 class="orders-title">
			<i class="fas fa-file-invoice"></i>
			Список ордеров
		</h1>

		<button appNavigate [navigateURL]="''"
				class="back-btn"
				data-aos="fade-down">
			<i class="fas fa-chevron-left"></i>
			Вернуться назад
		</button>
	</div>

	<!-- Список заявок -->
	<div class="orders-grid">
		@for (i of orderings; track i.id) {
			<div class="order-card" data-aos="zoom-in">
				<!-- Изображение объекта -->
				<div class="order-image">
					<img [src]="i.productImg" alt="Объект недвижимости">
				</div>

				<!-- Информация о заявке -->
				<div class="order-details">
					<h3 class="property-name">{{i.productName}}</h3>

					<div class="order-meta">
						<div class="meta-item">
							<i class="fas fa-business-time"></i>
							{{i.statusName}}
						</div>
						<div class="meta-item">
							<i class="fas fa-coins"></i>
							<span>{{i.price | currency:'USD':'symbol':'1.0-0'}} x {{i.quantity}}</span>
						</div>
						<div class="meta-item">
							<i class="fas fa-calculator"></i>
							Итого: {{i.sum | currency:'USD':'symbol':'1.0-0'}}
						</div>
						<div class="meta-item">
							<i class="fas fa-phone"></i>
							{{i.contact}}
						</div>
						<!--<div class="meta-item">
							<i class="fas fa-map-marker-alt"></i>
							{{i.address}}
						</div>-->
						<div *ngIf="role !== 'USER'" class="meta-item">
							<i class="fas fa-user-tie"></i>
							{{i.ownerFio}}
						</div>
					</div>

					<!-- Действия -->
					<div class="order-actions">
						<!-- Для пользователя -->
						<div *ngIf="role === 'USER' && i.status === 'WAITING'"
							 class="action-buttons">
							<button (click)="delete(i.id)" class="btn-cancel">
								<i class="fas fa-times-circle"></i>
								Отменить заявку
							</button>
						</div>

						<!-- Для менеджера -->
						<div *ngIf="role === 'MANAGER' && i.status === 'WAITING'"
							 class="action-buttons">
							<button (click)="confirmed(i.id)" class="btn-confirm">
								<i class="fas fa-check-circle"></i>
								Подтвердить
							</button>
							<button (click)="rejected(i.id)" class="btn-reject">
								<i class="fas fa-ban"></i>
								Отклонить
							</button>
						</div>

						<!-- Для сотрудников -->
						<div *ngIf="(role === 'COLLECTOR' && i.status === 'CONFIRMED')" class="action-buttons">
							<button (click)="collected(i.id)" class="btn-process">
								<i class="fas fa-tasks"></i>
								Подписать докоменты
							</button>
						</div>
						<!-- Для сотрудников -->
						<div *ngIf="(role === 'PACKER' && i.status === 'COLLECTED')" class="action-buttons">
							<button (click)="packed(i.id)" class="btn-process">
								<i class="fas fa-tasks"></i>
								Подписать документы
							</button>
						</div>
						<!-- Для сотрудников -->
						<div *ngIf="(role === 'DELIVERY' && i.status === 'PACKED')" class="action-buttons">
							<button (click)="delivered(i.id)" class="btn-process">
								<i class="fas fa-tasks"></i>
								Поставить печать
							</button>
						</div>
					</div>
				</div>
			</div>
		}
	</div>
</div>

<style>
	.orders-container {
		max-width: 1440px;
		margin: 2rem auto;
		padding: 0 2rem;
	}

	.orders-header {
		text-align: center;
		margin-bottom: 3rem;

	}

	.orders-title {
		font-size: 2.5rem;
		color: #ffffff;
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 1.5rem;
		margin-bottom: 1.5rem;
	}

	.back-btn {
		background: #f8f9fa;
		color: #3498db;
		border: 2px solid #3498db;
		padding: 0.8rem 2rem;
		border-radius: 0.8rem;
		transition: all 0.3s;
	}

	.back-btn:hover {
		background: #3498db;
		color: white;
		transform: translateY(-2px);
	}

	.orders-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
		gap: 2rem;
	}

	.order-card {
		background: white;
		border-radius: 1.5rem;
		box-shadow: 0 8px 20px rgba(0,0,0,0.08);
		overflow: hidden;
		transition: transform 0.3s;
	}

	.order-card:hover {
		transform: translateY(-5px);
	}

	.order-image {
		position: relative;
		height: 250px;
		overflow: hidden;
	}

	.order-image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		transition: transform 0.3s;
	}

	.order-card:hover .order-image img {
		transform: scale(1.05);
	}

	.status-badge {
		position: absolute;
		top: 1rem;
		right: 1rem;
		padding: 0.5rem 1rem;
		border-radius: 0.5rem;
		color: white;
		font-weight: 500;
	}

	.status-badge.waiting {
		background: #f1c40f;
	}

	.status-badge.confirmed {
		background: #2ecc71;
	}

	.status-badge.rejected {
		background: #e74c3c;
	}

	.status-badge.collected {
		background: #3498db;
	}

	.status-badge.packed {
		background: #9b59b6;
	}

	.status-badge.delivered {
		background: #27ae60;
	}

	.order-details {
		padding: 1.5rem;
	}

	.property-name {
		font-size: 1.4rem;
		color: #2c3e50;
		margin-bottom: 1rem;
	}

	.order-meta {
		display: flex;
		flex-direction: column;
		gap: 0.8rem;
		margin-bottom: 1.5rem;
	}

	.meta-item {
		display: flex;
		align-items: center;
		gap: 0.8rem;
		color: #4a6572;
		font-size: 0.95rem;
	}

	.meta-item i {
		width: 25px;
		color: #3498db;
	}

	.action-buttons {
		display: flex;
		flex-direction: column;
		gap: 0.8rem;
		margin-top: 1.5rem;
	}

	.action-buttons button {
		width: 100%;
		padding: 0.8rem;
		border: none;
		border-radius: 0.6rem;
		font-weight: 500;
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 0.8rem;
		transition: all 0.3s;
	}

	.btn-confirm {
		background: #2ecc71;
		color: white;
	}

	.btn-confirm:hover {
		background: #27ae60;
	}

	.btn-reject {
		background: #2980b9;
		color: white;
	}

	.btn-reject:hover {
		background: #2980b9;
	}

	.btn-cancel {
		background: #2980b9;
		color: white;
	}

	.btn-cancel:hover {
		background: #2980b9;
	}

	.btn-process {
		background: #3498db;
		color: white;
	}

	.btn-process:hover {
		background: #2980b9;
	}

	@media (max-width: 768px) {
		.orders-container {
			padding: 0 1rem;
		}

		.orders-grid {
			grid-template-columns: 1fr;
		}

		.order-image {
			height: 200px;
		}
	}

	@media (max-width: 480px) {
		.orders-title {
			font-size: 2rem;
		}
	}
</style>
